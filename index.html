<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Interactive visualization of Theory of Dynamic Symmetry" />
    <meta name="theme-color" content="#1a1a2e" />
    <meta name="author" content="TDS Research Team" />
    <meta name="keywords" content="Theory of Dynamic Symmetry, TDS, physics simulation, lattice dynamics, symmetry breaking" />
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="TDS Web Simulation" />
    <meta property="og:description" content="Interactive visualization of Theory of Dynamic Symmetry" />
    <meta property="og:url" content="https://quintarum.github.io/" />
    
    <title>TDS Web Simulation</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/styles/main.css" />
    <link rel="stylesheet" href="/styles/controls.css" />
    <link rel="stylesheet" href="/styles/analytics.css" />
    <link rel="stylesheet" href="/styles/tutorial.css" />
    <link rel="stylesheet" href="/styles/guided-tour.css" />
  </head>
  <body>
    <!-- Skip Navigation for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Main Application Container -->
    <div id="app">
      <!-- Header -->
      <header class="app-header" role="banner">
        <div class="header-content">
          <h1 class="app-title">TDS Web Simulation</h1>
          <p class="app-subtitle">Theory of Dynamic Symmetry - Interactive Visualization</p>
        </div>
        <nav class="header-actions" aria-label="Theme and language settings">
          <button id="theme-toggle" class="icon-btn" title="Toggle theme" aria-label="Toggle theme between light, dark, and high contrast modes">
            <span class="theme-icon" aria-hidden="true">ðŸŒ™</span>
          </button>
          <button id="language-toggle" class="icon-btn" title="Change language" aria-label="Change language">
            <span class="language-icon" aria-hidden="true">EN</span>
          </button>
        </nav>
      </header>

      <!-- Main Content Area -->
      <main id="main-content" class="app-main" role="main">
        <!-- Left Sidebar: Controls -->
        <aside class="sidebar sidebar-left" role="complementary" aria-label="Simulation controls">
          <div id="controls-panel" class="panel controls-panel">
            <!-- Controls will be dynamically generated by Controls.ts -->
          </div>
        </aside>

        <!-- Center: Visualization Canvas -->
        <section class="canvas-section" role="region" aria-label="Simulation visualization">
          <!-- Canvas Container for 2D/3D Rendering -->
          <div id="canvas-container" class="canvas-container" role="img" aria-label="Interactive lattice simulation visualization">
            <canvas id="canvas-2d" class="render-canvas" aria-label="2D simulation visualization" tabindex="0"></canvas>
            <canvas id="canvas-3d" class="render-canvas hidden" aria-label="3D simulation visualization" tabindex="0"></canvas>
            
            <!-- Canvas Overlay Controls -->
            <div class="canvas-overlay" aria-label="Canvas controls">
              <div class="canvas-controls">
                <button id="fullscreen-btn" class="canvas-btn" title="Toggle fullscreen" aria-label="Toggle fullscreen mode" aria-pressed="false">
                  <span aria-hidden="true">â›¶</span>
                </button>
                <button id="screenshot-btn" class="canvas-btn" title="Take screenshot" aria-label="Take screenshot of current simulation">
                  <span aria-hidden="true">ðŸ“·</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Timeline Component -->
          <div id="timeline-container" class="timeline-container" role="region" aria-label="Simulation timeline and playback controls">
            <!-- Timeline will be dynamically generated by Timeline.ts -->
          </div>
        </section>

        <!-- Right Sidebar: Analytics & Info -->
        <aside class="sidebar sidebar-right" role="complementary" aria-label="Analytics and statistics">
          <!-- Analytics Dashboard -->
          <div id="analytics-dashboard" class="panel analytics-panel" role="region" aria-label="Analytics dashboard">
            <!-- Analytics will be dynamically generated by AnalyticsDashboard.ts -->
          </div>

          <!-- Quick Stats -->
          <div id="quick-stats" class="panel stats-panel" role="region" aria-label="Quick statistics">
            <h3 class="panel-title">Quick Stats</h3>
            <div id="stats-content" class="stats-content" aria-live="polite" aria-atomic="true">
              <!-- Stats will be updated by main.ts -->
            </div>
          </div>
        </aside>
      </main>

      <!-- Info Panel (Modal) -->
      <div id="info-panel" role="dialog" aria-modal="true" aria-labelledby="info-panel-title">
        <!-- Info panel will be dynamically generated by InfoPanel.ts -->
      </div>

      <!-- Physics Problems Panel (Modal) -->
      <div id="physics-problems-panel" class="modal-panel hidden" role="dialog" aria-modal="true" aria-labelledby="physics-problems-title">
        <!-- Physics problems panel will be dynamically generated by PhysicsProblemsPanel.ts -->
      </div>

      <!-- Comparison View (Modal) -->
      <div id="comparison-view" class="modal-panel hidden" role="dialog" aria-modal="true" aria-labelledby="comparison-view-title">
        <!-- Comparison view will be dynamically generated by ComparisonView.ts -->
      </div>

      <!-- Tutorial Overlay -->
      <div id="tutorial-overlay" class="tutorial-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="tutorial-title">
        <!-- Tutorial will be dynamically generated by Tutorial.ts -->
      </div>

      <!-- Notification/Toast Container -->
      <div id="notification-container" class="notification-container" role="status" aria-live="polite">
        <!-- Notifications will be dynamically added here -->
      </div>

      <!-- Loading Indicator -->
      <div id="loading-indicator" class="loading-indicator hidden" role="alert" aria-live="assertive" aria-busy="true">
        <div class="spinner" aria-hidden="true"></div>
        <p>Loading simulation...</p>
      </div>

      <!-- Footer -->
      <footer class="app-footer" role="contentinfo">
        <div class="footer-content">
          <nav aria-label="Footer navigation">
            <p class="footer-text">
              <a href="https://doi.org/10.5281/zenodo.17465190" target="_blank" rel="noopener noreferrer" class="footer-link" aria-label="Read the theory paper (opens in new tab)">
                Read the theory paper
              </a>
              <span class="separator" aria-hidden="true">â€¢</span>
              <a href="https://github.com/quintarum/tds-web-simulation" target="_blank" rel="noopener noreferrer" class="footer-link" aria-label="View source code on GitHub (opens in new tab)">
                View on GitHub
              </a>
              <span class="separator" aria-hidden="true">â€¢</span>
              <button id="show-tutorial-btn" class="footer-link-btn" aria-label="Start interactive tutorial">Tutorial</button>
            </p>
          </nav>
        </div>
      </footer>
    </div>

    <!-- Application Script -->
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
